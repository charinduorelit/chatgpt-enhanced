{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\charindu\\\\Documents\\\\GitHub\\\\chatgpt_enhanced\\\\chatgpt-enhanced\\\\frontend\\\\src\\\\Components\\\\ChatInputForm.js\";\nimport \"./ChatInputForm.css\";\nimport React, { useEffect, useState } from \"react\";\nimport SpeechRecognition, { useSpeechRecognition } from \"react-speech-recognition\";\nimport { motion } from \"framer-motion\";\nconst ChatInputForm = ({\n  input,\n  setInput,\n  handleSubmit,\n  isLoading,\n  user,\n  selectedModel\n}) => {\n  // Hook to get transcript (the speech-to-text)\n  const {\n    transcript\n  } = useSpeechRecognition();\n  const [lastTranscript, setLastTranscript] = useState(transcript);\n  const [isListening, setIsListening] = useState(false);\n\n  // Turns microphone on and off\n  function handleToggleListening() {\n    if (isListening) {\n      SpeechRecognition.stopListening();\n      setIsListening(false);\n    } else {\n      SpeechRecognition.startListening({\n        continuous: true\n      });\n      setIsListening(true);\n    }\n  }\n\n  // Add transcript to input field when transcript changes\n  useEffect(() => {\n    setTimeout(() => {\n      const cleanedTranscript = transcript.trim().replace(/\\s+/g, \" \");\n      if (cleanedTranscript !== lastTranscript) {\n        setInput(input + cleanedTranscript.slice(lastTranscript.length));\n        setLastTranscript(cleanedTranscript);\n      }\n    }, 800);\n  }, [transcript, input, setInput, lastTranscript]);\n  return /*#__PURE__*/React.createElement(motion.div, {\n    // fades in\n    initial: {\n      opacity: 0.5\n    },\n    animate: {\n      opacity: 1\n    },\n    transition: {\n      duration: 0.1\n    },\n    className: \"chat-input-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }, user && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    className: `mic-button ${isListening && \"listening\"} ${isListening === false && \"not-listening\"}`,\n    onClick: handleToggleListening,\n    \"aria-label\": \"toggle microphone\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    stroke: \"currentColor\",\n    fill: \"currentColor\",\n    width: 24,\n    height: 24,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    className: \"mic-svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    stroke: \"none\",\n    d: \"M16 24H8v-1h3.5v-3.018A7.004 7.004 0 0 1 5 13v-2h1v2.01A6.003 6.003 0 0 0 12 19c3.311 0 6-2.689 6-6v-2h1v2a7.004 7.004 0 0 1-6.5 6.982V23H16v1zM7 5c0-2.76 2.24-5 5-5s5 2.24 5 5v8c0 2.76-2.24 5-5 5s-5-2.24-5-5V5zm9 0c0-2.208-1.792-4-4-4S8 2.792 8 5v8c0 2.208 1.792 4 4 4s4-1.792 4-4V5z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"form\", {\n    \"data-testid\": \"chat-input-form\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    maxLength: \"1000\" // Adjust this as needed\n    ,\n    required: true,\n    onKeyDown: e => {\n      if (e.key === \"Enter\") {\n        e.preventDefault();\n        if (e.target.value.trim() === \"\") return;\n        if (isLoading) return;\n        handleSubmit(e);\n      }\n    },\n    \"data-testid\": \"chat-input-textarea\",\n    className: \"chat-input-textarea\",\n    value: input,\n    onChange: e => setInput(e.target.value)\n    // Change placeholder based on selected model\n    ,\n    placeholder: selectedModel === \"code-davinci-002\" ? \"Start with a comment, data or code\" : \"Prompt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    \"data-testid\": \"submit-button\",\n    className: \"submit-button\",\n    disabled: isLoading,\n    \"aria-label\": \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    stroke: \"currentColor\",\n    fill: \"currentColor\",\n    strokeWidth: 0,\n    viewBox: \"0 0 20 20\",\n    className: \"submit-svg\",\n    height: \"1em\",\n    width: \"1em\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.894 2.553a1 1 0 0 0-1.788 0l-7 14a1 1 0 0 0 1.169 1.409l5-1.429A1 1 0 0 0 9 15.571V11a1 1 0 1 1 2 0v4.571a1 1 0 0 0 .725.962l5 1.428a1 1 0 0 0 1.17-1.408l-7-14z\",\n    stroke: \"none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }))))));\n};\nexport default ChatInputForm;","map":{"version":3,"names":["React","useEffect","useState","SpeechRecognition","useSpeechRecognition","motion","ChatInputForm","input","setInput","handleSubmit","isLoading","user","selectedModel","transcript","lastTranscript","setLastTranscript","isListening","setIsListening","handleToggleListening","stopListening","startListening","continuous","setTimeout","cleanedTranscript","trim","replace","slice","length","createElement","div","initial","opacity","animate","transition","duration","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Fragment","onClick","stroke","fill","width","height","xmlns","fillRule","clipRule","d","onSubmit","maxLength","required","onKeyDown","e","key","preventDefault","target","value","onChange","placeholder","disabled","strokeWidth","viewBox"],"sources":["C:/Users/charindu/Documents/GitHub/chatgpt_enhanced/chatgpt-enhanced/frontend/src/Components/ChatInputForm.js"],"sourcesContent":["import \"./ChatInputForm.css\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport SpeechRecognition, {\r\n  useSpeechRecognition,\r\n} from \"react-speech-recognition\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst ChatInputForm = ({\r\n  input,\r\n  setInput,\r\n  handleSubmit,\r\n  isLoading,\r\n  user,\r\n  selectedModel,\r\n}) => {\r\n  // Hook to get transcript (the speech-to-text)\r\n  const { transcript } = useSpeechRecognition();\r\n  const [lastTranscript, setLastTranscript] = useState(transcript);\r\n  const [isListening, setIsListening] = useState(false);\r\n\r\n  // Turns microphone on and off\r\n  function handleToggleListening() {\r\n    if (isListening) {\r\n      SpeechRecognition.stopListening();\r\n      setIsListening(false);\r\n    } else {\r\n      SpeechRecognition.startListening({ continuous: true });\r\n      setIsListening(true);\r\n    }\r\n  }\r\n\r\n  // Add transcript to input field when transcript changes\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      const cleanedTranscript = transcript.trim().replace(/\\s+/g, \" \");\r\n      if (cleanedTranscript !== lastTranscript) {\r\n        setInput(input + cleanedTranscript.slice(lastTranscript.length));\r\n        setLastTranscript(cleanedTranscript);\r\n      }\r\n    }, 800);\r\n  }, [transcript, input, setInput, lastTranscript]);\r\n\r\n  return (\r\n    <motion.div\r\n      // fades in\r\n      initial={{ opacity: 0.5 }}\r\n      animate={{ opacity: 1 }}\r\n      transition={{ duration: 0.1 }}\r\n      className=\"chat-input-box\"\r\n    >\r\n      {/* Only show chat input if user is signed in */}\r\n      {user && (\r\n        <>\r\n          {/* Microphone on/off button */}\r\n          <button\r\n            className={`mic-button ${isListening && \"listening\"} ${\r\n              isListening === false && \"not-listening\"\r\n            }`}\r\n            onClick={handleToggleListening}\r\n            aria-label=\"toggle microphone\"\r\n          >\r\n            {/* Microphone svg */}\r\n            <svg\r\n              stroke=\"currentColor\"\r\n              fill=\"currentColor\"\r\n              width={24}\r\n              height={24}\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              fillRule=\"evenodd\"\r\n              clipRule=\"evenodd\"\r\n              className=\"mic-svg\"\r\n            >\r\n              <path\r\n                stroke=\"none\"\r\n                d=\"M16 24H8v-1h3.5v-3.018A7.004 7.004 0 0 1 5 13v-2h1v2.01A6.003 6.003 0 0 0 12 19c3.311 0 6-2.689 6-6v-2h1v2a7.004 7.004 0 0 1-6.5 6.982V23H16v1zM7 5c0-2.76 2.24-5 5-5s5 2.24 5 5v8c0 2.76-2.24 5-5 5s-5-2.24-5-5V5zm9 0c0-2.208-1.792-4-4-4S8 2.792 8 5v8c0 2.208 1.792 4 4 4s4-1.792 4-4V5z\"\r\n              />\r\n            </svg>\r\n          </button>\r\n\r\n          {/* Input form */}\r\n          <form data-testid=\"chat-input-form\" onSubmit={handleSubmit}>\r\n            <textarea\r\n              maxLength=\"1000\" // Adjust this as needed\r\n              required={true}\r\n              onKeyDown={(e) => {\r\n                if (e.key === \"Enter\") {\r\n                  e.preventDefault();\r\n                  if (e.target.value.trim() === \"\") return;\r\n                  if (isLoading) return;\r\n                  handleSubmit(e);\r\n                }\r\n              }}\r\n              data-testid=\"chat-input-textarea\"\r\n              className=\"chat-input-textarea\"\r\n              value={input}\r\n              onChange={(e) => setInput(e.target.value)}\r\n              // Change placeholder based on selected model\r\n              placeholder={\r\n                selectedModel === \"code-davinci-002\"\r\n                  ? \"Start with a comment, data or code\"\r\n                  : \"Prompt\"\r\n              }\r\n            ></textarea>\r\n\r\n            {/* Submit button */}\r\n            <button\r\n              data-testid=\"submit-button\"\r\n              className=\"submit-button\"\r\n              disabled={isLoading}\r\n              aria-label=\"submit\"\r\n            >\r\n              {/* Submit svg */}\r\n              <svg\r\n                stroke=\"currentColor\"\r\n                fill=\"currentColor\"\r\n                strokeWidth={0}\r\n                viewBox=\"0 0 20 20\"\r\n                className=\"submit-svg\"\r\n                height=\"1em\"\r\n                width=\"1em\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n              >\r\n                <path\r\n                  d=\"M10.894 2.553a1 1 0 0 0-1.788 0l-7 14a1 1 0 0 0 1.169 1.409l5-1.429A1 1 0 0 0 9 15.571V11a1 1 0 1 1 2 0v4.571a1 1 0 0 0 .725.962l5 1.428a1 1 0 0 0 1.17-1.408l-7-14z\"\r\n                  stroke=\"none\"\r\n                />\r\n              </svg>\r\n            </button>\r\n          </form>\r\n        </>\r\n      )}\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default ChatInputForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}